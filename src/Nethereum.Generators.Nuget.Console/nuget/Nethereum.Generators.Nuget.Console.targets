<Project>

  <PropertyGroup>
    <IsWindows Condition="'$(OS)' == 'Windows_NT'">true</IsWindows>
  </PropertyGroup>

  <Target Name="PreBuild" BeforeTargets="PreBuildEvent">
    <Message Condition = "$(NethereumGenerateCode) != 'false'" Importance="high" Text="Building csharp from code generated proto files" />
    <Exec Condition = "$(IsWindows) == 'true' and $(NethereumGenerateCode) != 'false'" Command="dotnet %USERPROFILE%\.nuget\packages\Nethereum.Generators.Nuget.Console\1.0.0.1\lib\Nethereum.Generators.Nuget.Console generate -p $(ProjectPath)" />
    <Exec Condition = "$(IsWindows) == ''  and $(NethereumGenerateCode) != 'false'" Command="dotnet ~/.nuget/packages/Nethereum.Generators.Nuget.Console/1.0.0.1/lib/Nethereum.Generators.Nuget.Console generate -p $(ProjectPath)" />
  </Target>

</Project>